# Shipments

Shipments are the core records in Evership — they represent the packages being prepared for delivery, including the sender and recipient information, parcel dimensions, and selected shipping service. On this page, we'll explore the endpoints available for managing shipments programmatically. You can create, retrieve, update, purchase, cancel, and delete shipments through the API.
## The shipment model

The shipment model stores all the details needed to fulfill and track a shipment. Each shipment must have a collection and delivery address, at least one parcel, and can optionally include metadata like order number or customer contact information. Shipments can be created in a pending state or immediately purchased if a rate is available.

### Properties

<Properties>
  <Property name="id" type="string">
    Unique identifier for the shipment.
  </Property>
  <Property name="state" type="string">
    Current state of the shipment (pending, purchased, cancelled).
  </Property>
  <Property name="created_at" type="timestamp">
    Timestamp when the shipment was created.
  </Property>
  <Property name="collection_address" type="object">
    Address from where the parcel will be collected.
  </Property>
  <Property name="delivery_address" type="object">
    Address where the parcel will be delivered.
  </Property>
  <Property name="parcels" type="array">
    List of parcels included in the shipment, including quantity, weight, and dimensions.
  </Property>
  <Property name="metadata" type="object">
    Optional object containing order details like customer name, phone, email, or reference numbers.
  </Property>
  <Property name="label_url" type="string">
    (If purchased) URL to download the shipment label.
  </Property>
  <Property name="tracking_number" type="string">
    (If purchased) Carrier-provided tracking number.
  </Property>
  <Property name="rate_selected" type="object">
    (If purchased) Details of the rate used to purchase the shipment, including provider, service, and price.
  </Property>
</Properties>

---

## Create Shipment {{ tag: 'POST', label: 'https://www.api.evership.co.za/v1/shipments' }}

<Row>
  <Col>

    The “Create shipment” API will allow you to create a single shipment record on your account in either a pending or purchased state with a single call.  If the shipment is not purchased when the record is created you can purchase the shipment later using the [Purchase shipments](https://www.notion.so/Purchase-shipments-1d0f4d58d4e381cdb0a1f361936864af?pvs=21) API

    ### Request fields

    <Properties>
      <Property name="sender" type="object">
        Object containing information about the sender.
      </Property>
      <Property name="sender.name" type="string" required>
        Name of the sender.
      </Property>
      <Property name="sender.contact" type="string" required>
        Contact number of the sender. Format 0812345678, must contain at least 10 digits.
      </Property>
      <Property name="sender.email" type="string">
        Email address of the sender.
      </Property>
      <Property name="sender.collection_address" type="object">
        Object containing the collection address details for the sender.
      </Property>
      <Property name="sender.collection_address.address1" type="string">
        First line of the address, typically including the unit or apartment number.
      </Property>
      <Property name="sender.collection_address.address2" type="string" required>
        Second line of the address, typically including the street name and number.
      </Property>
      <Property name="sender.collection_address.suburb" type="string" required>
        Suburb of the collection address.
      </Property>
      <Property name="sender.collection_address.city" type="string" required>
        City of the collection address.
      </Property>
      <Property name="sender.collection_address.province" type="string" required>
        Province of the collection address.
      </Property>
      <Property name="sender.collection_address.postal_code" type="string" required>
        Postal code of the collection address.
      </Property>
      <Property name="sender.collection_address.country" type="string" required>
        Country of the collection address.
      </Property>
      <Property name="sender.collection_address.full_address" type="string" required>
        Full formatted address of the collection location.
      </Property>
      <Property name="sender.collection_address.latitude" type="float">
        Latitude coordinate of the collection address. If not passed the address will be geocoded.
      </Property>
      <Property name="sender.collection_address.longitude" type="float">
        Longitude coordinate of the collection address. If not passed the address will be geocoded.
      </Property>
      <Property name="sender.pickup_instructions" type="string">
        Special instructions for pickup at the sender's location.
      </Property>
      <Property name="receiver" type="object">
        Object containing information about the receiver.
      </Property>
      <Property name="receiver.name" type="string" required>
        Name of the receiver.
      </Property>
      <Property name="receiver.contact" type="string" required>
        Contact number of the receiver.
      </Property>
      <Property name="receiver.email" type="string">
        Email address of the receiver.
      </Property>
      <Property name="receiver.delivery_address" type="object">
        Object containing the delivery address details for the receiver.
      </Property>
      <Property name="receiver.delivery_address.address1" type="string">
        First line of the address, typically including the unit or apartment number.
      </Property>
      <Property name="receiver.delivery_address.address2" type="string" required>
        Second line of the address, typically including the street name and number.
      </Property>
      <Property name="receiver.delivery_address.suburb" type="string" required>
        Suburb of the delivery address.
      </Property>
      <Property name="receiver.delivery_address.city" type="string" required>
        City of the delivery address.
      </Property>
      <Property name="receiver.delivery_address.province" type="string" required>
        Province of the delivery address.
      </Property>
      <Property name="receiver.delivery_address.postal_code" type="string" required>
        Postal code of the delivery address.
      </Property>
      <Property name="receiver.delivery_address.country" type="string" required>
        Country of the delivery address.
      </Property>
      <Property name="receiver.delivery_address.full_address" type="string" required>
        Full formatted address of the delivery address, if the address is passed as a single string.
      </Property>
      <Property name="receiver.delivery_address.latitude" type="float">
        Latitude coordinate of the delivery address. If empty the delivery address will be geocoded.
      </Property>
      <Property name="receiver.delivery_address.longitude" type="float">
        Longitude coordinate of the delivery address. If empty the delivery address will be geocoded.
      </Property>
      <Property name="receiver.drop_off_instructions" type="string">
        Special instructions for delivery at the receiver's location.
      </Property>
      <Property name="parcels" type="array" required>
        Array of objects, each containing details about a parcel to be shipped.
      </Property>
      <Property name="parcels.reference" type="string">
        Reference identifier for the parcel.
      </Property>
      <Property name="parcels.description" type="string">
        Description of the parcel contents.
      </Property>
      <Property name="parcels.dimensions" type="object" required>
        Object containing the dimensions of the parcel.
      </Property>
      <Property name="parcels.dimensions.length" type="float" required>
        Length of the parcel in centimeters.
      </Property>
      <Property name="parcels.dimensions.width" type="float" required>
        Width of the parcel in centimeters.
      </Property>
      <Property name="parcels.dimensions.height" type="float" required>
        Height of the parcel in centimeters.
      </Property>
      <Property name="parcels.weight" type="float" required>
        Weight of the parcel in kilograms.
      </Property>
      <Property name="shipment_title" type="string">
        Title or identifier for the shipment. If left empty the title “Untitled shipment” will be appended.
      </Property>
      <Property name="shipment_type" type="string" required>
        Type of shipment (outbound, inbound, transfer, or return).
      </Property>
      <Property name="carrier_service" type="string">
        Carrier service to be used for the shipment. If left empty, the cheapest service is selected.
      </Property>
      <Property name="purchase_label" type="boolean" required>
        Boolean indicating whether to purchase a shipping label. 
        <ul>
          <li><b>true</b> = Shipment will be purchased and shipment label will be returned in the response</li>
          <li><b>false</b> = Shipment will not be purchased, but the shipment record will be created in a pending state</li>
        </ul>
      </Property>
      <Property name="collection_date" type="string">
        Date for collection of the shipment. Leave empty if purchase_label is false.
      </Property>
      <Property name="collection_time" type="string">
        Time for collection of the shipment. Leave empty if purchase_label is false.
      </Property>
    </Properties>

  </Col>
  <Col sticky>

    <CodeGroup title="Request" tag="POST" label="/v1/shipments">

    ```json
    {
      "sender": {
        "name": "Ishmael Evans",
        "contact": "0817553597",
        "email": "ishmael@usecarter.com",
        "collection_address": {
          "address1": "Unit 22",
          "address2": "26 Washington Rd",
          "suburb": "Claremont",
          "city": "Cape Town",
          "province": "Western Cape",
          "postal_code": "7780",
          "country": "South Africa",
          "full_address": "Unit 22, 26 Washington Rd, Claremont, Cape Town, 7780, South Africa",
          "latitude": -33.9706,
          "longitude": 18.4649
        },
        "pickup_instructions": "Call when arrived"
      },
      "receiver": {
        "name": "Jane Smith",
        "contact": "0787654321",
        "email": "janesmith@example.com",
        "delivery_address": {
          "address1": "Tech Solutions Inc., Tech Park, Suite 500",
          "address2": "12 Clyde Road",
          "suburb": "Green Point",
          "city": "Cape Town",
          "province": "Western Cape",
          "postal_code": "8005",
          "country": "South Africa",
          "full_address": "Tech Solutions Inc., Tech Park, Suite 500, 12 Clyde Road, Green Point, Cape Town, 8005, South Africa",
          "latitude": -33.9095,
          "longitude": 18.4155
        },
        "drop_off_instructions": "Please ring the bell twice"
      },
      "parcels": [
        {
          "reference": "Parcel-REF-1",
          "description": "Books",
          "dimensions": {
            "length": 30,
            "width": 20,
            "height": 10
          },
          "weight": 5
        },
        {
          "reference": "Parcel-REF-2",
          "description": "Clothes",
          "dimensions": {
            "length": 40,
            "width": 25,
            "height": 15
          },
          "weight": 7
        }
      ],
      "shipment_title": "Order #1234",
      "shipment_type": "outbound",
      "carrier_service": "dpd-econ",
      "purchase_label": true,
      "collection_date": "2025-02-14",
      "collection_time": "12:30:00"
    }
    ```

  </CodeGroup>
  </Col>
</Row>

---

## Create a shipment {{ tag: 'POST', label: '/v1/shipments' }}

<Row>
  <Col>

    This endpoint allows you to create a new shipment. You must provide the collection and delivery addresses, and at least one parcel.

    ### Required attributes

    <Properties>
      <Property name="collection_address" type="object">
        The address from which the shipment will be collected.
      </Property>
      <Property name="delivery_address" type="object">
        The address to which the shipment will be delivered.
      </Property>
      <Property name="parcels" type="array">
        List of parcel objects included in the shipment.
      </Property>
    </Properties>

  </Col>
  <Col sticky>

    <CodeGroup title="Request" tag="POST" label="/v1/shipments">

    ```bash {{ title: 'cURL' }}
    curl https://api.evership.app/v1/shipments \
      -H "Authorization: Bearer {token}" \
      -d collection_address="..." \
      -d delivery_address="..." \
      -d parcels="..."
    ```

    ```js
    import ApiClient from '@evership/api-client'

    const client = new ApiClient(token)

    await client.shipments.create({
      collection_address: { /* ... */ },
      delivery_address: { /* ... */ },
      parcels: [ /* ... */ ]
    })
    ```

    ```python
    from evership_api import ApiClient

    client = ApiClient(token)

    client.shipments.create(
      collection_address={...},
      delivery_address={...},
      parcels=[...],
    )
    ```

    ```php
    $client = new \Evership\ApiClient($token);

    $client->shipments->create([
      'collection_address' => [...],
      'delivery_address' => [...],
      'parcels' => [...],
    ]);
    ```

    </CodeGroup>

    ```json {{ title: 'Response' }}
    {
      "id": "shp_1234567890",
      "status": "pending",
      "collection_address": { /* ... */ },
      "delivery_address": { /* ... */ },
      "parcels": [ /* ... */ ],
      "rates": [ /* ... */ ],
      "selected_rate": null,
      "tracking": null,
      "created_at": 1710000000,
      "updated_at": 1710000000
    }
    ```

  </Col>
</Row>

---

## Retrieve a shipment {{ tag: 'GET', label: '/v1/shipments/:id' }}

<Row>
  <Col>

    This endpoint allows you to retrieve a shipment by providing the shipment id. Refer to [the list](#the-shipment-model) at the top of this page to see which properties are included with shipment objects.

  </Col>
  <Col sticky>

    <CodeGroup title="Request" tag="GET" label="/v1/shipments/shp_1234567890">

    ```bash {{ title: 'cURL' }}
    curl https://api.evership.app/v1/shipments/shp_1234567890 \
      -H "Authorization: Bearer {token}"
    ```

    ```js
    import ApiClient from '@evership/api-client'

    const client = new ApiClient(token)

    await client.shipments.get('shp_1234567890')
    ```

    ```python
    from evership_api import ApiClient

    client = ApiClient(token)

    client.shipments.get("shp_1234567890")
    ```

    ```php
    $client = new \Evership\ApiClient($token);

    $client->shipments->get('shp_1234567890');
    ```

    </CodeGroup>

    ```json {{ title: 'Response' }}
    {
      "id": "shp_1234567890",
      "status": "pending",
      "collection_address": { /* ... */ },
      "delivery_address": { /* ... */ },
      "parcels": [ /* ... */ ],
      "rates": [ /* ... */ ],
      "selected_rate": null,
      "tracking": null,
      "created_at": 1710000000,
      "updated_at": 1710000000
    }
    ```

  </Col>
</Row>

---

## Update a shipment {{ tag: 'PUT', label: '/v1/shipments/:id' }}

<Row>
  <Col>

    This endpoint allows you to perform an update on a shipment. Examples of updates are selecting a rate, updating the status, or updating the addresses.

    ### Optional attributes

    <Properties>
      <Property name="status" type="string">
        The current status of the shipment (e.g. pending, purchased, cancelled).
      </Property>
      <Property name="collection_address" type="object">
        The address from which the shipment will be collected.
      </Property>
      <Property name="delivery_address" type="object">
        The address to which the shipment will be delivered.
      </Property>
      <Property name="parcels" type="array">
        List of parcel objects included in the shipment.
      </Property>
      <Property name="rates" type="array">
        List of available rates for the shipment.
      </Property>
      <Property name="selected_rate" type="object">
        The rate selected for the shipment.
      </Property>
      <Property name="tracking" type="object">
        Tracking information for the shipment.
      </Property>
    </Properties>

  </Col>
  <Col sticky>

    <CodeGroup title="Request" tag="PUT" label="/v1/shipments/shp_1234567890">

    ```bash {{ title: 'cURL' }}
    curl -X PUT https://api.evership.app/v1/shipments/shp_1234567890 \
      -H "Authorization: Bearer {token}" \
      -d 'status'=purchased
    ```

    ```js
    import ApiClient from '@evership/api-client'

    const client = new ApiClient(token)

    await client.shipments.update('shp_1234567890', {
        status: 'purchased',
    })
    ```

    ```python
    from evership_api import ApiClient

    client = ApiClient(token)

    client.shipments.update("shp_1234567890", status='purchased')
    ```

    ```php
    $client = new \Evership\ApiClient($token);

    $client->shipments->update('shp_1234567890', [
      'status' => 'purchased',
    ]);
    ```

    </CodeGroup>

    ```json {{ title: 'Response' }}
    {
      "id": "shp_1234567890",
      "status": "purchased",
      "collection_address": { /* ... */ },
      "delivery_address": { /* ... */ },
      "parcels": [ /* ... */ ],
      "rates": [ /* ... */ ],
      "selected_rate": null,
      "tracking": null,
      "created_at": 1710000000,
      "updated_at": 1710000000
    }
    ```

  </Col>
</Row>

---

## Delete a shipment {{ tag: 'DELETE', label: '/v1/shipments/:id' }}

<Row>
  <Col>

    This endpoint allows you to delete your shipments in Evership. Note: This will permanently delete the shipment and all its related data — archive it instead if you want to be able to restore it later.

  </Col>
  <Col sticky>

    <CodeGroup title="Request" tag="DELETE" label="/v1/shipments/shp_1234567890">

    ```bash {{ title: 'cURL' }}
    curl -X DELETE https://api.evership.app/v1/shipments/shp_1234567890 \
      -H "Authorization: Bearer {token}"
    ```

    ```js
    import ApiClient from '@evership/api-client'

    const client = new ApiClient(token)

    await client.shipments.delete('shp_1234567890')
    ```

    ```python
    from evership_api import ApiClient

    client = ApiClient(token)

    client.shipments.delete("shp_1234567890")
    ```

    ```php
    $client = new \Evership\ApiClient($token);

    $client->shipments->delete('shp_1234567890');
    ```

    </CodeGroup>

  </Col>
</Row>
