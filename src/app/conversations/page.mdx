export const metadata = {
  title: 'Shipments',
  description:
    'On this page, we'll dive into the different shipment endpoints you can use to manage shipments programmatically.',
}

# Shipments

Shipments are the core records in Evership — they represent the packages being prepared for delivery, including the sender and recipient information, parcel dimensions, and selected shipping service. On this page, we’ll explore the endpoints available for managing shipments programmatically. You can create, retrieve, update, purchase, cancel, and delete shipments through the API.
## The shipment model

The shipment model stores all the details needed to fulfill and track a shipment. Each shipment must have a collection and delivery address, at least one parcel, and can optionally include metadata like order number or customer contact information. Shipments can be created in a pending state or immediately purchased if a rate is available.

### Properties

<Properties>
  <Property name="id" type="string">
    Unique identifier for the shipment.
  </Property>
  <Property name="state" type="string">
    Current state of the shipment (pending, purchased, cancelled).
  </Property>
  <Property name="created_at" type="timestamp">
    Timestamp when the shipment was created.
  </Property>
  <Property name="collection_address" type="object">
    Address from where the parcel will be collected.
  </Property>
  <Property name="delivery_address" type="object">
    Address where the parcel will be delivered.
  </Property>
  <Property name="parcels" type="array">
    List of parcels included in the shipment, including quantity, weight, and dimensions.
  </Property>
  <Property name="metadata" type="object">
    Optional object containing order details like customer name, phone, email, or reference numbers.
  </Property>
  <Property name="label_url" type="string">
    (If purchased) URL to download the shipment label.
  </Property>
  <Property name="tracking_number" type="string">
    (If purchased) Carrier-provided tracking number.
  </Property>
  <Property name="rate_selected" type="object">
    (If purchased) Details of the rate used to purchase the shipment, including provider, service, and price.
  </Property>
</Properties>

---

## List all shipments {{ tag: 'GET', label: '/v1/shipments' }}

<Row>
  <Col>

    This endpoint allows you to retrieve a paginated list of all your shipments. By default, a maximum of ten shipments are shown per page.

    ### Optional attributes

    <Properties>
      <Property name="limit" type="integer">
        Limit the number of shipments returned.
      </Property>
      <Property name="status" type="string">
        Filter shipments by status (e.g. pending, purchased, cancelled).
      </Property>
      <Property name="created_at" type="timestamp">
        Filter shipments created at a specific time.
      </Property>
    </Properties>

  </Col>
  <Col sticky>

    <CodeGroup title="Request" tag="GET" label="/v1/shipments">

    ```bash {{ title: 'cURL' }}
    curl -G https://api.evership.app/v1/shipments \
      -H "Authorization: Bearer {token}" \
      -d limit=10
    ```

    ```js
    import ApiClient from '@evership/api-client'

    const client = new ApiClient(token)

    await client.shipments.list()
    ```

    ```python
    from evership_api import ApiClient

    client = ApiClient(token)

    client.shipments.list()
    ```

    ```php
    $client = new \Evership\ApiClient($token);

    $client->shipments->list();
    ```

    </CodeGroup>

    ```json {{ title: 'Response' }}
    {
      "has_more": false,
      "data": [
        {
          "id": "shp_1234567890",
          "status": "pending",
          "collection_address": { /* ... */ },
          "delivery_address": { /* ... */ },
          "parcels": [ /* ... */ ],
          "rates": [ /* ... */ ],
          "selected_rate": null,
          "tracking": null,
          "created_at": 1710000000,
          "updated_at": 1710000000
        },
        {
          "id": "shp_0987654321"
          // ...
        }
      ]
    }
    ```

  </Col>
</Row>

---

## Create a shipment {{ tag: 'POST', label: '/v1/shipments' }}

<Row>
  <Col>

    This endpoint allows you to create a new shipment. You must provide the collection and delivery addresses, and at least one parcel.

    ### Required attributes

    <Properties>
      <Property name="collection_address" type="object">
        The address from which the shipment will be collected.
      </Property>
      <Property name="delivery_address" type="object">
        The address to which the shipment will be delivered.
      </Property>
      <Property name="parcels" type="array">
        List of parcel objects included in the shipment.
      </Property>
    </Properties>

  </Col>
  <Col sticky>

    <CodeGroup title="Request" tag="POST" label="/v1/shipments">

    ```bash {{ title: 'cURL' }}
    curl https://api.evership.app/v1/shipments \
      -H "Authorization: Bearer {token}" \
      -d collection_address="..." \
      -d delivery_address="..." \
      -d parcels="..."
    ```

    ```js
    import ApiClient from '@evership/api-client'

    const client = new ApiClient(token)

    await client.shipments.create({
      collection_address: { /* ... */ },
      delivery_address: { /* ... */ },
      parcels: [ /* ... */ ]
    })
    ```

    ```python
    from evership_api import ApiClient

    client = ApiClient(token)

    client.shipments.create(
      collection_address={...},
      delivery_address={...},
      parcels=[...],
    )
    ```

    ```php
    $client = new \Evership\ApiClient($token);

    $client->shipments->create([
      'collection_address' => [...],
      'delivery_address' => [...],
      'parcels' => [...],
    ]);
    ```

    </CodeGroup>

    ```json {{ title: 'Response' }}
    {
      "id": "shp_1234567890",
      "status": "pending",
      "collection_address": { /* ... */ },
      "delivery_address": { /* ... */ },
      "parcels": [ /* ... */ ],
      "rates": [ /* ... */ ],
      "selected_rate": null,
      "tracking": null,
      "created_at": 1710000000,
      "updated_at": 1710000000
    }
    ```

  </Col>
</Row>

---

## Retrieve a shipment {{ tag: 'GET', label: '/v1/shipments/:id' }}

<Row>
  <Col>

    This endpoint allows you to retrieve a shipment by providing the shipment id. Refer to [the list](#the-shipment-model) at the top of this page to see which properties are included with shipment objects.

  </Col>
  <Col sticky>

    <CodeGroup title="Request" tag="GET" label="/v1/shipments/shp_1234567890">

    ```bash {{ title: 'cURL' }}
    curl https://api.evership.app/v1/shipments/shp_1234567890 \
      -H "Authorization: Bearer {token}"
    ```

    ```js
    import ApiClient from '@evership/api-client'

    const client = new ApiClient(token)

    await client.shipments.get('shp_1234567890')
    ```

    ```python
    from evership_api import ApiClient

    client = ApiClient(token)

    client.shipments.get("shp_1234567890")
    ```

    ```php
    $client = new \Evership\ApiClient($token);

    $client->shipments->get('shp_1234567890');
    ```

    </CodeGroup>

    ```json {{ title: 'Response' }}
    {
      "id": "shp_1234567890",
      "status": "pending",
      "collection_address": { /* ... */ },
      "delivery_address": { /* ... */ },
      "parcels": [ /* ... */ ],
      "rates": [ /* ... */ ],
      "selected_rate": null,
      "tracking": null,
      "created_at": 1710000000,
      "updated_at": 1710000000
    }
    ```

  </Col>
</Row>

---

## Update a shipment {{ tag: 'PUT', label: '/v1/shipments/:id' }}

<Row>
  <Col>

    This endpoint allows you to perform an update on a shipment. Examples of updates are selecting a rate, updating the status, or updating the addresses.

    ### Optional attributes

    <Properties>
      <Property name="status" type="string">
        The current status of the shipment (e.g. pending, purchased, cancelled).
      </Property>
      <Property name="collection_address" type="object">
        The address from which the shipment will be collected.
      </Property>
      <Property name="delivery_address" type="object">
        The address to which the shipment will be delivered.
      </Property>
      <Property name="parcels" type="array">
        List of parcel objects included in the shipment.
      </Property>
      <Property name="rates" type="array">
        List of available rates for the shipment.
      </Property>
      <Property name="selected_rate" type="object">
        The rate selected for the shipment.
      </Property>
      <Property name="tracking" type="object">
        Tracking information for the shipment.
      </Property>
    </Properties>

  </Col>
  <Col sticky>

    <CodeGroup title="Request" tag="PUT" label="/v1/shipments/shp_1234567890">

    ```bash {{ title: 'cURL' }}
    curl -X PUT https://api.evership.app/v1/shipments/shp_1234567890 \
      -H "Authorization: Bearer {token}" \
      -d 'status'=purchased
    ```

    ```js
    import ApiClient from '@evership/api-client'

    const client = new ApiClient(token)

    await client.shipments.update('shp_1234567890', {
        status: 'purchased',
    })
    ```

    ```python
    from evership_api import ApiClient

    client = ApiClient(token)

    client.shipments.update("shp_1234567890", status='purchased')
    ```

    ```php
    $client = new \Evership\ApiClient($token);

    $client->shipments->update('shp_1234567890', [
      'status' => 'purchased',
    ]);
    ```

    </CodeGroup>

    ```json {{ title: 'Response' }}
    {
      "id": "shp_1234567890",
      "status": "purchased",
      "collection_address": { /* ... */ },
      "delivery_address": { /* ... */ },
      "parcels": [ /* ... */ ],
      "rates": [ /* ... */ ],
      "selected_rate": null,
      "tracking": null,
      "created_at": 1710000000,
      "updated_at": 1710000000
    }
    ```

  </Col>
</Row>

---

## Delete a shipment {{ tag: 'DELETE', label: '/v1/shipments/:id' }}

<Row>
  <Col>

    This endpoint allows you to delete your shipments in Evership. Note: This will permanently delete the shipment and all its related data — archive it instead if you want to be able to restore it later.

  </Col>
  <Col sticky>

    <CodeGroup title="Request" tag="DELETE" label="/v1/shipments/shp_1234567890">

    ```bash {{ title: 'cURL' }}
    curl -X DELETE https://api.evership.app/v1/shipments/shp_1234567890 \
      -H "Authorization: Bearer {token}"
    ```

    ```js
    import ApiClient from '@evership/api-client'

    const client = new ApiClient(token)

    await client.shipments.delete('shp_1234567890')
    ```

    ```python
    from evership_api import ApiClient

    client = ApiClient(token)

    client.shipments.delete("shp_1234567890")
    ```

    ```php
    $client = new \Evership\ApiClient($token);

    $client->shipments->delete('shp_1234567890');
    ```

    </CodeGroup>

  </Col>
</Row>
